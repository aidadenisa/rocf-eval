"use strict";(self["webpackChunkrocf_eval"]=self["webpackChunkrocf_eval"]||[]).push([[147],{1390:(t,e,i)=>{i.d(e,{Z:()=>u});var a=i(3673),o=i(2323);function n(t,e,i,n,s,r){const l=(0,a.up)("q-icon");return(0,a.wg)(),(0,a.iD)("button",{class:(0,o.C_)(["rocf-button",`variant-${i.variant}`,{"display-block":i.block},`size-${i.size}`])},["left"==i.iconPosition?((0,a.wg)(),(0,a.j4)(l,{key:0,name:i.icon},null,8,["name"])):(0,a.kq)("",!0),(0,a._)("span",null,[(0,a.WI)(t.$slots,"default",{},void 0,!0)]),"right"==i.iconPosition?((0,a.wg)(),(0,a.j4)(l,{key:1,name:i.icon},null,8,["name"])):(0,a.kq)("",!0)],2)}const s={props:{icon:{type:String},iconPosition:{type:String},variant:{type:String,default:"primary"},block:{type:Boolean,default:!0},size:{type:String,default:"large"}}};var r=i(4554),l=i(7518),c=i.n(l);s.render=n,s.__scopeId="data-v-4ab461c7";const u=s;c()(s,"components",{QIcon:r.Z})},3715:(t,e,i)=>{i.d(e,{Z:()=>C});i(71);var a=i(3673),o=i(2323);(0,a.dD)("data-v-2a4a6adb");const n={class:"subtitle"},s={class:"title"},r={key:0,class:"info-icon"},l=(0,a.Uk)("Close"),c=["innerHTML"];function u(t,e,i,u,d,p){const g=(0,a.up)("q-icon"),h=(0,a.up)("q-space"),m=(0,a.up)("q-tooltip"),f=(0,a.up)("q-btn"),w=(0,a.up)("q-bar"),v=(0,a.up)("q-card-section"),b=(0,a.up)("q-card"),_=(0,a.up)("q-dialog"),k=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:"subpage-heading",onClick:e[0]||(e[0]=(...t)=>p.openInfoDialog&&p.openInfoDialog(...t))},[(0,a._)("div",n,(0,o.zw)(i.subtitle),1),(0,a._)("h2",s,[(0,a.Uk)((0,o.zw)(i.title)+" ",1),i.info?((0,a.wg)(),(0,a.iD)("span",r,[(0,a.Wm)(g,{name:"info"})])):(0,a.kq)("",!0)])]),(0,a.Wm)(_,{modelValue:d.showInfoDialog,"onUpdate:modelValue":e[1]||(e[1]=t=>d.showInfoDialog=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,o.zw)(p.titleTxt),1),(0,a.Wm)(h),(0,a.wy)((0,a.Wm)(f,{dense:"",flat:"",icon:"close"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"bg-white text-primary"},{default:(0,a.w5)((()=>[l])),_:1})])),_:1},512),[[k]])])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",{innerHTML:i.info},null,8,c)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}(0,a.Cn)();const d={props:{subtitle:{type:String},title:{type:String},info:{type:String}},data(){return{showInfoDialog:!1}},methods:{openInfoDialog(){this.info&&(this.showInfoDialog=!0)}},computed:{titleTxt(){return this.$t("subpageHeading_dialogTitle")}}};var p=i(4554),g=i(9815),h=i(151),m=i(846),f=i(2025),w=i(9400),v=i(5528),b=i(5589),_=i(677),k=i(7518),I=i.n(k);d.render=u,d.__scopeId="data-v-2a4a6adb";const C=d;I()(d,"components",{QIcon:p.Z,QDialog:g.Z,QCard:h.Z,QBar:m.Z,QSpace:f.Z,QBtn:w.Z,QTooltip:v.Z,QCardSection:b.Z}),I()(d,"directives",{ClosePopup:_.Z})},9147:(t,e,i)=>{i.r(e),i.d(e,{default:()=>k});var a=i(3673),o=i(2323);(0,a.dD)("data-v-c5ac3aea");const n={class:"page-content"},s={ref:"editor",class:"image-editor"},r=["src"],l={key:0,class:"loader"},c=(0,a._)("p",null,"loading...",-1),u=[c],d={class:"use-picture-btn "};function p(t,e,i,c,p,g){const h=(0,a.up)("subpage-heading"),m=(0,a.up)("rocf-button"),f=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(f,{class:"flex column justify-between"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(h,{title:g.titleTxt,subtitle:g.subtitleTxt},null,8,["title","subtitle"]),(0,a._)("div",s,[p.imageSrc?((0,a.wg)(),(0,a.iD)("img",{key:0,ref:"image",src:p.imageSrc},null,8,r)):(0,a.kq)("",!0)],512),p.loading?((0,a.wg)(),(0,a.iD)("div",l,u)):(0,a.kq)("",!0)]),(0,a._)("div",d,[(0,a.Wm)(m,{icon:"chevron_right","icon-position":"right",onClick:g.saveImage},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(g.usePhotoTxt),1)])),_:1},8,["onClick"])])])),_:1})}(0,a.Cn)();var g=i(3715),h=i(1390),m=i(1254),f=i.n(m);const w={name:"Camera",data(){return{info:"",cameraOptionsBarHeight:120,imageSrc:"",paperRatio:148.5/210,cropper:{},preview:"",loading:!0}},components:{SubpageHeading:g.Z,RocfButton:h.Z},beforeMount(){this.imageSrc=this.$store.state.image},mounted(){this.crop(this.imageSrc).then((t=>{this.imageSrc=t,this.getImageDimensions(this.imageSrc),this.setupCropper(),console.log("setupCropper")}))},methods:{saveImage(){this.preview=this.cropper.getCroppedCanvas().toDataURL(),this.$store.dispatch("fetchImage",this.preview),this.$router.push("/evaluate/set-points")},setupCropper(){const t=this.$refs.image;this.cropper=new(f())(t,{autoCrop:!0,zoomable:!0,scalable:!1,viewMode:3,background:!1,modal:!1,highlight:!1,guides:!1,minCropBoxWidth:window.screen.width,minCropBoxHeight:parseInt(window.screen.width*this.paperRatio),ready:()=>{this.loading=!1,console.log("loading "+this.loading)}})},async crop(t){return new Promise((e=>{const i=new Image;i.onload=()=>{const t=i.naturalHeight,a=i.naturalWidth<i.naturalHeight?t/2:t,o=0,n=-a/2,s=document.createElement("canvas");s.width=i.naturalWidth,s.height=a;const r=s.getContext("2d");r.drawImage(i,o,n),e(s.toDataURL())},i.src=t}))},getImageDimensions(t){var e=new Image;e.onload=()=>{this.info="second dimensions: "+e.width+", "+e.height},e.src=t}},computed:{titleTxt(){return this.$t("adjustImage_title")},subtitleTxt(){return this.$t("adjustImage_subtitle")},usePhotoTxt(){return this.$t("adjustImage_takePhotoBtn")}}};var v=i(4379),b=i(7518),_=i.n(b);w.render=p,w.__scopeId="data-v-c5ac3aea";const k=w;_()(w,"components",{QPage:v.Z})}}]);