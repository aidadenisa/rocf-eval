(self["webpackChunkrocf_eval"]=self["webpackChunkrocf_eval"]||[]).push([[501],{7734:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});const o="https://api.rocf2.aida.blog",a={post:async(t,e)=>{const s=localStorage.getItem("token")||"";let a=await fetch(o+t,{method:"POST",headers:{"Content-Type":"application/json","x-access-token":s},body:JSON.stringify(e)}).then((t=>t.json()));return a},get:async t=>{const e=localStorage.getItem("token")||"";let s=await fetch(o+t,{method:"GET",crossDomain:!0,headers:{"x-access-token":e}}).then((t=>t.json()));return s},put:async(t,e)=>{const s=localStorage.getItem("token")||"";let a=await fetch(o+t,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":s},crossDomain:!0,body:JSON.stringify(e)}).then((t=>t.json()));return a},getImage:async t=>{const e=localStorage.getItem("token")||"";let s=await fetch(o+t,{method:"GET",crossDomain:!0,headers:{"x-access-token":e}}),a=await s.blob();return a}},r=a},4984:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});const o={getDiagnosisFromScore:t=>t<15?"Dementia":t>=15&&t<30?"MCI":t>=30?"Normal":"",getLabelFromScore(t){let e="unknown";switch(t){case 0:e="omitted";break;case 1:e="distorted";break;case 2:e="misplaced";break;case 3:e="correct";break;default:e="unknown"}return e},hasHistory(){return window.history.length>2},sum(t){let e=0;if(!t.length)return e;for(let s=t.length;s--;)e+=t[s];return e}},a=o},2563:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var o=s(3673);(0,o.dD)("data-v-62ea849a");const a={class:"g-card"};function r(t,e,s,r,c,n){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}(0,o.Cn)();const c={};c.render=r,c.__scopeId="data-v-62ea849a";const n=c},6501:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>W});var o=s(3673),a=s(2323),r=s(8880);(0,o.dD)("data-v-43c86689");const c={class:"rocf-header"},n={class:"greeting"},i={class:"doctor-name"},l={class:"search-bar flex row "},u={class:"rocf-evaluations"},M={key:1,class:"empty-list-rocfs"},d=(0,o._)("br",null,null,-1);function g(t,e,s,g,I,f){const D=(0,o.up)("new-rocf"),h=(0,o.up)("router-link"),T=(0,o.up)("q-icon"),y=(0,o.up)("rocf-list"),w=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(w,{class:"flex column flex-start"},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o._)("h3",n,(0,a.zw)(f.greetingTxt)+",",1),(0,o._)("h2",i,(0,a.zw)(f.doctorTxt)+" "+(0,a.zw)(I.user.name),1)]),(0,o.Wm)(h,{to:"/evaluate/patient"},{default:(0,o.w5)((()=>[(0,o.Wm)(D)])),_:1}),(0,o._)("div",l,[(0,o.Wm)(T,{name:"search",class:"search-icon"}),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>I.search=t)},null,512),[[r.nr,I.search]])]),(0,o._)("div",u,[(0,o._)("h3",null,(0,a.zw)(f.previousRocfTxt),1),f.filteredROCF.length?((0,o.wg)(),(0,o.j4)(y,{key:0,rocfs:f.filteredROCF},null,8,["rocfs"])):((0,o.wg)(),(0,o.iD)("div",M,[d,(0,o._)("h3",null,(0,a.zw)(f.noRocfTxt),1)]))])])),_:1})}(0,o.Cn)();var I=s(7734),f=s(9522),D=s.n(f);(0,o.dD)("data-v-0626309b");const h={class:"new-rocf"},T=(0,o._)("img",{src:D()},null,-1),y={class:"call-to-action"},w={class:"info"};function j(t,e,s,r,c,n){return(0,o.wg)(),(0,o.iD)("div",h,[T,(0,o._)("p",y,(0,a.zw)(n.evaluateRocfTxt),1),(0,o._)("p",w,(0,a.zw)(n.infoText),1)])}(0,o.Cn)();const m={data(){return{results:null,info:""}},computed:{evaluateRocfTxt(){return this.$t("newRocf_evaluate")},infoText(){return this.$t("newRocf_takePhoto")}}};m.render=j,m.__scopeId="data-v-0626309b";const z=m,p={class:"rocf-list"};function x(t,e,s,a,r,c){const n=(0,o.up)("rocf-card");return(0,o.wg)(),(0,o.iD)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.rocfs,((t,e)=>((0,o.wg)(),(0,o.j4)(n,{key:e,rocf:t,onClick:e=>c.openROCFResults(t)},null,8,["rocf","onClick"])))),128))])}(0,o.dD)("data-v-1d3ce5ce");const v={class:"info col-9"},k={class:"patient"},N={class:"date"},C={class:"score"},O={class:"diagnosis"};function A(t,e,s,r,c,n){const i=(0,o.up)("g-card");return(0,o.wg)(),(0,o.j4)(i,{class:(0,a.C_)(["rocf-card","flex","row",{"scores-missing":!s.rocf.scores}])},{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o._)("div",k,(0,a.zw)(n.patientTxt)+" "+(0,a.zw)(s.rocf.patientCode),1),(0,o._)("div",N,(0,a.zw)(n.formattedDate),1)]),(0,o._)("div",{class:(0,a.C_)(["result",s.rocf.diagnosis?s.rocf.diagnosis.labelText.toLowerCase():"","col-3","flex","column","justify-center"])},[(0,o._)("div",C,(0,a.zw)(n.score),1),(0,o._)("div",O,(0,a.zw)(s.rocf.diagnosis?s.rocf.diagnosis.labelText:"Loading..."),1)],2)])),_:1},8,["class"])}(0,o.Cn)();var L=s(4984),b=s(2563);const Z={props:{rocf:{type:Object}},components:{GCard:b.Z},computed:{formattedDate(){return new Date(this.rocf.date).toDateString()},score(){return this.rocf.scores?L.Z.sum(this.rocf.scores.map((t=>t.score))):0},patientTxt(){return this.$t("rocfCard_patient")}}};Z.render=A,Z.__scopeId="data-v-1d3ce5ce";const S=Z,_={props:{rocfs:{type:Array}},components:{RocfCard:S},data(){return{results:null,info:""}},methods:{openROCFResults(t){this.$router.push("/evaluate/rocf/"+t._id)}}};_.render=x;const E=_,R={name:"Dashboard",data(){return{results:null,info:"",rocfs:[],user:null,search:""}},components:{NewRocf:z,RocfList:E},methods:{checkIfEvaluationInProgress(){let t=localStorage.getItem("evaluationInProgressId");t&&(alert(this.rocfInProgressTxt),this.setIntervalForRetrievingResults(t))},setIntervalForRetrievingResults(t){const e=setInterval((async()=>{let s=await I.Z.get("/rocf/"+t);s.scores&&(this.results=s.scores,localStorage.removeItem("evaluationInProgressId"),clearInterval(e),this.$store.dispatch("fetchNewRocfToArray",s),alert(`${this.rocfReady1Txt} ${s.patientCode} ${this.rocfReady2Txt}`))}),15e3)},async getLastROCFs(){this.rocfs=await I.Z.get("/rocf"),console.log(this.rocfs),this.$store.dispatch("fetchNewRocfEvaluations",this.rocfs)}},async beforeMount(){this.user=this.$store.state.user,await this.getLastROCFs()},mounted(){this.rocfs=this.$store.state.rocfEvaluations,this.checkIfEvaluationInProgress()},computed:{filteredROCF(){return this.rocfs.filter((t=>t.patientCode.toLowerCase().includes(this.search.toLowerCase())))},greetingTxt(){return this.$t("dashboard_greeting")},doctorTxt(){return this.$t("dashboard_doctorTitle")},previousRocfTxt(){return this.$t("dashboard_previousROCF")},noRocfTxt(){return this.$t("dashboard_noROCF")},rocfInProgressTxt(){return this.$t("dashboard_rocfInProgressAlert")},rocfReady1Txt(){return this.$t("dashboard_rocfReady1Alert")},rocfReady2Txt(){return this.$t("dashboard_rocfReady2Alert")}}};var Q=s(4379),U=s(4554),G=s(7518),P=s.n(G);R.render=g,R.__scopeId="data-v-43c86689";const W=R;P()(R,"components",{QPage:Q.Z,QIcon:U.Z})},9522:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iMzMiIHZpZXdCb3g9IjAgMCA0NSAzMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yOCA1LjEyMTA5SDJWMjIuMTIxMUgyOFY1LjEyMTA5Wk0wIDMuMTIxMDlWMjQuMTIxMUgzMFYzLjEyMTA5SDBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQwIDEzLjEyMTJMMjkgNS4xMjEyMUwzMCAzLjEyMTIxTDQzIDEzLjEyMTJMMzAgMjQuMTIxMkwyOSAyMi4xMjEyTDQwIDEzLjEyMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI5IDUuMTIxMDlMMS45NTA5MyAyMy4wNDgyTDAuODQ2MDM5IDIxLjM4MTFMMjcuODk1MSAzLjQ1Mzk5TDI5IDUuMTIxMDlaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEuOTUwOTIgNS4xMjEwOUwyOSAyMy4wNDgyTDMwLjEwNDkgMjEuMzgxMUwzLjA1NTgyIDMuNDUzOTlMMS45NTA5MiA1LjEyMTA5WiIgZmlsbD0id2hpdGUiLz4KPGNpcmNsZSBjeD0iMzMiIGN5PSIyNC4xMjEyIiByPSI4IiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMzYuMTUzMSAyMy4xNDE0SDMzLjg1ODRWMjAuODQ3QzMzLjg1ODQgMjAuODQ3IDMzLjg3OTUgMTkuOTkxMyAzMy4wMzQ4IDIwLjAwMDFDMzIuMTkwMSAyMC4wMDg5IDMyLjE0MTQgMjAuODQ3IDMyLjE0MTQgMjAuODQ3VjIzLjE0MTRIMjkuODQ2OUMyOS44NDY5IDIzLjE0MTQgMjkuMDAzOSAyMy4xNDUzIDI5IDIzLjk4ODRDMjguOTk2IDI0LjgzMTUgMjkuODQ2OSAyNC44NTg1IDI5Ljg0NjkgMjQuODU4NUgzMi4xNDE0VjI3LjE1M0MzMi4xNDE0IDI3LjE1MyAzMi4xNDUzIDI3Ljk5NjEgMzIuOTg4MyAyOEMzMy44MzE1IDI4LjAwMzkgMzMuODU4NCAyNy4xNTMgMzMuODU4NCAyNy4xNTNWMjQuODU4NUgzNi4xNTMxQzM2LjE1MzEgMjQuODU4NSAzNy4wMDg4IDI0Ljg3OTQgMzYuOTk5OSAyNC4wMzQ3QzM2Ljk5MTEgMjMuMTkgMzYuMTUzMSAyMy4xNDE0IDM2LjE1MzEgMjMuMTQxNFoiIGZpbGw9IiMwODU3REUiLz4KPC9zdmc+Cg=="}}]);