"use strict";(self["webpackChunkrocf_eval"]=self["webpackChunkrocf_eval"]||[]).push([[147],{8461:(t,e,a)=>{a.d(e,{Z:()=>u});var i=a(3673),o=a(2323);(0,i.dD)("data-v-38937d58");const n=["disabled"];function s(t,e,a,s,l,r){const c=(0,i.up)("q-icon");return(0,i.wg)(),(0,i.iD)("button",{class:(0,o.C_)(["rocf-button",`variant-${a.variant}`,{"display-block":a.block},`size-${a.size}`]),disabled:a.disabled},["left"==a.iconPosition?((0,i.wg)(),(0,i.j4)(c,{key:0,name:a.icon},null,8,["name"])):(0,i.kq)("",!0),(0,i._)("span",null,[(0,i.WI)(t.$slots,"default",{},void 0,!0)]),"right"==a.iconPosition?((0,i.wg)(),(0,i.j4)(c,{key:1,name:a.icon},null,8,["name"])):(0,i.kq)("",!0)],10,n)}(0,i.Cn)();const l={props:{icon:{type:String},iconPosition:{type:String},variant:{type:String,default:"primary"},block:{type:Boolean,default:!0},size:{type:String,default:"large"},disabled:{type:Boolean,default:!1}}};var r=a(4554),c=a(7518),d=a.n(c);l.render=s,l.__scopeId="data-v-38937d58";const u=l;d()(l,"components",{QIcon:r.Z})},3715:(t,e,a)=>{a.d(e,{Z:()=>C});a(71);var i=a(3673),o=a(2323);(0,i.dD)("data-v-2a4a6adb");const n={class:"subtitle"},s={class:"title"},l={key:0,class:"info-icon"},r=(0,i.Uk)("Close"),c=["innerHTML"];function d(t,e,a,d,u,p){const g=(0,i.up)("q-icon"),h=(0,i.up)("q-space"),m=(0,i.up)("q-tooltip"),f=(0,i.up)("q-btn"),w=(0,i.up)("q-bar"),v=(0,i.up)("q-card-section"),b=(0,i.up)("q-card"),_=(0,i.up)("q-dialog"),k=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:"subpage-heading",onClick:e[0]||(e[0]=(...t)=>p.openInfoDialog&&p.openInfoDialog(...t))},[(0,i._)("div",n,(0,o.zw)(a.subtitle),1),(0,i._)("h2",s,[(0,i.Uk)((0,o.zw)(a.title)+" ",1),a.info?((0,i.wg)(),(0,i.iD)("span",l,[(0,i.Wm)(g,{name:"info"})])):(0,i.kq)("",!0)])]),(0,i.Wm)(_,{modelValue:u.showInfoDialog,"onUpdate:modelValue":e[1]||(e[1]=t=>u.showInfoDialog=t),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,(0,o.zw)(p.titleTxt),1),(0,i.Wm)(h),(0,i.wy)((0,i.Wm)(f,{dense:"",flat:"",icon:"close"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-white text-primary"},{default:(0,i.w5)((()=>[r])),_:1})])),_:1},512),[[k]])])),_:1}),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i._)("div",{innerHTML:a.info},null,8,c)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}(0,i.Cn)();const u={props:{subtitle:{type:String},title:{type:String},info:{type:String}},data(){return{showInfoDialog:!1}},methods:{openInfoDialog(){this.info&&(this.showInfoDialog=!0)}},computed:{titleTxt(){return this.$t("subpageHeading_dialogTitle")}}};var p=a(4554),g=a(9815),h=a(151),m=a(846),f=a(2025),w=a(9400),v=a(5528),b=a(5589),_=a(677),k=a(7518),I=a.n(k);u.render=d,u.__scopeId="data-v-2a4a6adb";const C=u;I()(u,"components",{QIcon:p.Z,QDialog:g.Z,QCard:h.Z,QBar:m.Z,QSpace:f.Z,QBtn:w.Z,QTooltip:v.Z,QCardSection:b.Z}),I()(u,"directives",{ClosePopup:_.Z})},9147:(t,e,a)=>{a.r(e),a.d(e,{default:()=>k});var i=a(3673),o=a(2323);(0,i.dD)("data-v-c5ac3aea");const n={class:"page-content"},s={ref:"editor",class:"image-editor"},l=["src"],r={key:0,class:"loader"},c=(0,i._)("p",null,"loading...",-1),d=[c],u={class:"use-picture-btn "};function p(t,e,a,c,p,g){const h=(0,i.up)("subpage-heading"),m=(0,i.up)("rocf-button"),f=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(f,{class:"flex column justify-between"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(h,{title:g.titleTxt,subtitle:g.subtitleTxt},null,8,["title","subtitle"]),(0,i._)("div",s,[p.imageSrc?((0,i.wg)(),(0,i.iD)("img",{key:0,ref:"image",src:p.imageSrc},null,8,l)):(0,i.kq)("",!0)],512),p.loading?((0,i.wg)(),(0,i.iD)("div",r,d)):(0,i.kq)("",!0)]),(0,i._)("div",u,[(0,i.Wm)(m,{icon:"chevron_right","icon-position":"right",onClick:g.saveImage},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(g.usePhotoTxt),1)])),_:1},8,["onClick"])])])),_:1})}(0,i.Cn)();var g=a(3715),h=a(8461),m=a(1254),f=a.n(m);const w={name:"Camera",data(){return{info:"",cameraOptionsBarHeight:120,imageSrc:"",paperRatio:148.5/210,cropper:{},preview:"",loading:!0}},components:{SubpageHeading:g.Z,RocfButton:h.Z},beforeMount(){this.imageSrc=this.$store.state.image},mounted(){this.crop(this.imageSrc).then((t=>{this.imageSrc=t,this.getImageDimensions(this.imageSrc),this.setupCropper(),console.log("setupCropper")}))},methods:{saveImage(){this.preview=this.cropper.getCroppedCanvas().toDataURL(),this.$store.dispatch("fetchImage",this.preview),this.$router.push("/evaluate/set-points")},setupCropper(){const t=this.$refs.image;this.cropper=new(f())(t,{autoCrop:!0,zoomable:!0,scalable:!1,viewMode:3,background:!1,modal:!1,highlight:!1,guides:!1,minCropBoxWidth:window.screen.width,minCropBoxHeight:parseInt(window.screen.width*this.paperRatio),ready:()=>{this.loading=!1,console.log("loading "+this.loading)}})},async crop(t){return new Promise((e=>{const a=new Image;a.onload=()=>{const t=a.naturalHeight,i=a.naturalWidth<a.naturalHeight?t/2:t,o=0,n=-i/2,s=document.createElement("canvas");s.width=a.naturalWidth,s.height=i;const l=s.getContext("2d");l.drawImage(a,o,n),e(s.toDataURL())},a.src=t}))},getImageDimensions(t){var e=new Image;e.onload=()=>{this.info="second dimensions: "+e.width+", "+e.height},e.src=t}},computed:{titleTxt(){return this.$t("adjustImage_title")},subtitleTxt(){return this.$t("adjustImage_subtitle")},usePhotoTxt(){return this.$t("adjustImage_takePhotoBtn")}}};var v=a(4379),b=a(7518),_=a.n(b);w.render=p,w.__scopeId="data-v-c5ac3aea";const k=w;_()(w,"components",{QPage:v.Z})}}]);